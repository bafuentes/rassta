<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="rassta">
<title>Stratification Units • rassta</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Stratification Units">
<meta property="og:description" content="rassta">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">rassta</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-2">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/classunits.html">Classification Units</a>
    <a class="dropdown-item" href="../articles/modeling.html">Predictive Modeling Engine</a>
    <a class="dropdown-item" href="../articles/sampling.html">Stratified Non-Probability Sampling</a>
    <a class="dropdown-item" href="../articles/signature.html">Spatial Signature of Classification Units</a>
    <a class="dropdown-item" href="../articles/similarity.html">Landscape Similarity to Stratification Units</a>
    <a class="dropdown-item" href="../articles/stratunits.html">Stratification Units</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/bafuentes/rassta/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">
<script src="stratunits_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Stratification Units</h1>
                        <h4 data-toc-skip class="author">rassta: Raster-based Spatial Stratification Algorithms</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/bafuentes/rassta/blob/HEAD/vignettes/stratunits.Rmd" class="external-link"><code>vignettes/stratunits.Rmd</code></a></small>
      <div class="d-none name"><code>stratunits.Rmd</code></div>
    </div>

    
    
<hr>
<p>Get the data required for this vignette</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Compressed folder with files from rassta’s installation folder</span>
<span class="va">wasoil</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"exdat/wasoil.zip"</span>, package <span class="op">=</span> <span class="st">"rassta"</span><span class="op">)</span>
<span class="co"># Directory for temporary files</span>
<span class="va">o</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>
<span class="co"># Copy compressed folder to directory for temporary files</span>
<span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.copy</a></span><span class="op">(</span>from <span class="op">=</span> <span class="va">wasoil</span>, to <span class="op">=</span> <span class="va">o</span><span class="op">)</span>
<span class="co">#&gt; [1] TRUE</span>
<span class="co"># Extract files to subfolder</span>
<span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">o</span>, <span class="st">"/rassta"</span>, sep <span class="op">=</span> <span class="st">""</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/unzip.html" class="external-link">unzip</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">o</span>, <span class="st">"/wasoil.zip"</span>, sep <span class="op">=</span> <span class="st">""</span><span class="op">)</span>, exdir <span class="op">=</span> <span class="va">d</span><span class="op">)</span></code></pre></div>
<hr>
<p>Stratification units are second-level spatial entities that result from the spatial intersection of <em>n</em> sets of classification units. Each set of classification units may represent a landscape factor (e.g., topography), or a particular spatial scale of a landscape factor (e.g., micro-topography). One example of a stratification unit can be a unit representing cold, dry, and steeped terrain in high altitude. This stratification unit could have resulted from the spatial intersection of climatic classification units representing both precipitation and temperature gradients, and topographic classification units representing both elevation and slope gradients. Currently, <strong>rassta</strong> allows the creation of stratification units based on the simple intersection of raster layers representing sets of classification units.</p>
<div class="section level2">
<h2 id="spatial-intersection-of-classification-units">Spatial intersection of classification units<a class="anchor" aria-label="anchor" href="#spatial-intersection-of-classification-units"></a>
</h2>
<p>The process to create stratification units is fairly simple. First, <em>n</em> sets of classification units need to be loaded as a terra’s multi-layer <em>SpatRaster</em> object. Raster layers in this object must represent categorical data (i.e., classification units). Then, the function <em>strata()</em> is used to perform two processes: (1) spatial intersection of raster layers, and (2) assignment of a unique numeric code to each resulting unit.</p>
<p>For this example, three sets of classification units will be used to create one set of stratification units. The sets of classification units correspond to (i) climatic, (ii) soil parent material, and (iii) terrain classification units. The maps below show the classification units and the interpretation for each set of classification units.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Load rassta and terra packages</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://bafuentes.github.io/rassta/">rassta</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/terra/" class="external-link">terra</a></span><span class="op">)</span>
<span class="co"># Multi-layer SpatRaster with 3 sets of classification units</span>
<span class="va">cu</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"climate.tif"</span>, <span class="st">"material.tif"</span>, <span class="st">"terrain.tif"</span><span class="op">)</span>
<span class="va">cudir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">d</span>, <span class="va">cu</span>, sep <span class="op">=</span> <span class="st">"/"</span><span class="op">)</span>
<span class="va">all.cu</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="va">cudir</span><span class="op">)</span>
<span class="co"># Plot the sets of classification units</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">all.cu</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, type <span class="op">=</span> <span class="st">"classes"</span>, main <span class="op">=</span> <span class="st">"Climatic Classification Units"</span>, 
     col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/palettes.html" class="external-link">hcl.colors</a></span><span class="op">(</span><span class="fl">4</span>, <span class="st">"spectral"</span><span class="op">)</span>, mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.5</span>, <span class="fl">1.5</span>, <span class="fl">1.5</span>, <span class="fl">16</span><span class="op">)</span>,
     levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1. Highest Rainfall and Lowest Temperature"</span>,
                <span class="st">"2. High Rainfall and Low Temperature"</span>,
                <span class="st">"3. Low Rainfall and High Temperature"</span>,
                <span class="st">"4. Lowest Rainfall and Highest Temperature"</span>
              <span class="op">)</span>
    <span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">all.cu</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span>, type <span class="op">=</span> <span class="st">"classes"</span>, main <span class="op">=</span> <span class="st">"Soil Parent Material Units"</span>, 
     col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/palettes.html" class="external-link">hcl.colors</a></span><span class="op">(</span><span class="fl">6</span>, <span class="st">"spectral"</span><span class="op">)</span>, mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.5</span>, <span class="fl">1.5</span>, <span class="fl">1.5</span>, <span class="fl">16</span><span class="op">)</span>,
     levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1. Igneous"</span>, <span class="st">"2. Sedimentary"</span>,
                <span class="st">"3. Alluvium - Moderately weathered "</span>,
                <span class="st">"4. Alluvium - Somewhat weathered"</span>,
                <span class="st">"5. Alluvium - Rich in organic matter"</span>,
                <span class="st">"6. Alluvium - Rich in clay and organic matter"</span>
                <span class="op">)</span>
    <span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">all.cu</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span>, type <span class="op">=</span> <span class="st">"classes"</span>, main <span class="op">=</span> <span class="st">"Terrain Classification Units"</span>, 
     col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/palettes.html" class="external-link">hcl.colors</a></span><span class="op">(</span><span class="fl">8</span>, <span class="st">"spectral"</span><span class="op">)</span>, mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.5</span>, <span class="fl">1.5</span>, <span class="fl">1.5</span>, <span class="fl">16</span><span class="op">)</span>,
     levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1. Summit"</span>, <span class="st">"2. Shoulder"</span>, <span class="st">"3. Backslope"</span>,
                <span class="st">"4. Backslope - Steep"</span>, <span class="st">"5. Footslope"</span>,
                <span class="st">"6. Footslope - Steep"</span>, <span class="st">"7. Toeslope"</span>, <span class="st">"8. Floodplain"</span>
                <span class="op">)</span>
<span class="op">)</span></code></pre></div>
<p><img src="stratunits_files/figure-html/climclass-1.png" width="374.4"></p>
<p>The following code demonstrates how to create stratification units from the three sets of classification units with the function <em>strata()</em>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Stratification units from the intersection of classification units</span>
<span class="va">su</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/strata.html">strata</a></span><span class="op">(</span>cu.rast <span class="op">=</span> <span class="va">all.cu</span><span class="op">)</span>
<span class="co"># Plot SpatRaster of stratification units</span>
<span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">su</span><span class="op">$</span><span class="va">su.rast</span>, type <span class="op">=</span> <span class="st">"classes"</span>, main <span class="op">=</span> <span class="st">"Stratification Units"</span>,
     col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/palettes.html" class="external-link">hcl.colors</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/dimensions.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">su</span><span class="op">$</span><span class="va">su.rast</span><span class="op">)</span><span class="op">[</span>, <span class="fl">1</span><span class="op">]</span><span class="op">)</span>, <span class="st">"spectral"</span><span class="op">)</span>,
     plg <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ncol <span class="op">=</span> <span class="fl">4</span><span class="op">)</span>, mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.5</span>, <span class="fl">1.5</span>, <span class="fl">1.5</span>, <span class="fl">12</span><span class="op">)</span>
    <span class="op">)</span></code></pre></div>
<p><img src="stratunits_files/figure-html/strata-1.png" width="480"></p>
</div>
<div class="section level2">
<h2 id="numeric-code-of-stratification-units">Numeric code of stratification units<a class="anchor" aria-label="anchor" href="#numeric-code-of-stratification-units"></a>
</h2>
<p>The numeric code makes it possible to trace back the specific classification unit that composes a given stratification unit. The code below demonstrates how to retrieve the <em>multipliers</em> used to create the numeric codes for the stratification units.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Print multipliers used to code each stratification unit</span>
<span class="va">su</span><span class="op">$</span><span class="va">code.mult</span>
<span class="co">#&gt;  climate material  terrain </span>
<span class="co">#&gt;      100       10        1</span></code></pre></div>
<p>The multipliers indicate the relative placement of the classification unit’s numeric ID from each landscape factor or factor scale. In this example, the classification unit from climate is denoted by the hundreds digit, that from soil parent material is denoted by the tens digit, and that from terrain is denoted by the units digit. For example, the stratification unit <strong>111</strong> indicates the spatial convergence of the climatic classification unit = <strong>1</strong> (highest rainfall and lowest temperature), the parent material classification unit = <strong>1</strong> (igneous), and the terrain classification unit = <strong>1</strong> (summit). Therefore, the stratification unit <strong>111</strong> can be interpreted as summits located on areas of volcanic origin (igneous), which are exposed to the highest amount of precipitation and the lowest temperature, as compared to the rest of the landscape.</p>
<hr>
<p>Clean files from temporary directory</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">o</span>, <span class="st">"/wasoil.zip"</span>, sep <span class="op">=</span> <span class="st">""</span><span class="op">)</span>, <span class="va">d</span><span class="op">)</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<hr>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<ul>
<li>B.A. Fuentes, M.J. Dorantes, and J.R. Tipton. rassta: Raster-based Spatial Stratification Algorithms. <em>EarthArXiv</em>, 2021. <a href="https://doi.org/10.31223/X50S57" class="external-link uri">https://doi.org/10.31223/X50S57</a>
</li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Bryan A. Fuentes, Minerva J. Dorantes, John R. Tipton.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
