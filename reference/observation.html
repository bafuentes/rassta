<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Select the Representative Response Observation for Stratification Units — observation • rassta</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Select the Representative Response Observation for Stratification Units — observation"><meta property="og:description" content="Selection of the representative response observation for each
stratification unit occurring across geographic space. One observation from a
set of n observations of a response variable sampled/measured within
the spatial boundaries of a given stratification unit is selected according
to the following criteria: (1) maximum landscape similarity, (2)
median response value, and (3) random selection. The maximum
landscape similarity (mls) selects the observation at the XY spatial
location where the landscape similarity value is maximized for a given
stratification unit. The median response value (mrv) selects the observation
whose response value is (closest to) the median of all response values, as
measured from the observations spatially enclosed by a given stratification
unit. The random selection, as implied by the name, randomly selects one
observation from the set of observations spatially enclosed by a given
stratification unit. See Details for some guidance in the use of this
function for classification units."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rassta</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/classunits.html">Classification Units</a>
    </li>
    <li>
      <a href="../articles/modeling.html">Predictive Modeling Engine</a>
    </li>
    <li>
      <a href="../articles/sampling.html">Stratified Non-Probability Sampling</a>
    </li>
    <li>
      <a href="../articles/signature.html">Spatial Signature of Classification Units</a>
    </li>
    <li>
      <a href="../articles/similarity.html">Landscape Similarity to Stratification Units</a>
    </li>
    <li>
      <a href="../articles/stratunits.html">Stratification Units</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/bafuentes/rassta/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Select the Representative Response Observation for Stratification Units</h1>
    <small class="dont-index">Source: <a href="https://github.com/bafuentes/rassta/blob/HEAD/R/observation.r" class="external-link"><code>R/observation.r</code></a></small>
    <div class="hidden name"><code>observation.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Selection of the <em>representative response observation</em> for each
stratification unit occurring across geographic space. One observation from a
set of <em>n</em> observations of a response variable sampled/measured within
the spatial boundaries of a given stratification unit is selected according
to the following criteria: (1) <em>maximum landscape similarity</em>, (2)
<em>median response value</em>, and (3) <em>random selection</em>. The maximum
landscape similarity (mls) selects the observation at the <em>XY</em> spatial
location where the landscape similarity value is maximized for a given
stratification unit. The median response value (mrv) selects the observation
whose response value is (closest to) the median of all response values, as
measured from the observations spatially enclosed by a given stratification
unit. The random selection, as implied by the name, randomly selects one
observation from the set of observations spatially enclosed by a given
stratification unit. See <strong>Details</strong> for some guidance in the use of this
function for classification units.</p>
    </div>

    <div id="ref-usage">Usage,<div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">observation</span><span class="op">(</span>
  <span class="va">su.rast</span>,
  <span class="va">obs</span>,
  <span class="va">col.id</span>,
  <span class="va">col.resp</span>,
  method <span class="op">=</span> <span class="st">"mls"</span>,
  <span class="va">ls.rast</span>,
  verbose <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span></code></pre></div></div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>su.rast</dt>
<dd><p>SpatRaster, as in <code><a href="https://rdrr.io/pkg/terra/man/rast.html" class="external-link">rast</a></code>. Single-layer
SpatRaster representing the stratification units occurring across
geographic space. Integer values are expected as cell values (i.e., numeric
codes) of stratification units.</p></dd>
<dt>obs</dt>
<dd><p>SpatVector, as in <code><a href="https://rdrr.io/pkg/terra/man/vect.html" class="external-link">vect</a></code>. Vector of point
geometry whose tabular attributes should contain an ID column (1,2,...,n)
and a column of the response' values.</p></dd>
<dt>col.id</dt>
<dd><p>Integer. Index of the ID column in the tabular attributes of
<em>obs</em>.</p></dd>
<dt>col.resp</dt>
<dd><p>Integer. Index of the response' values column in the tabular
attributes of <em>obs</em>.</p></dd>
<dt>method</dt>
<dd><p>Character. String specifying the selection method for the
response representative observation. Options are "mls" for the maximum
landscape similarity value, "mrv" for the median response value, and
"random" for random selection. Default: "mls"</p></dd>
<dt>ls.rast</dt>
<dd><p>SpatRaster, as in <code><a href="https://rdrr.io/pkg/terra/man/rast.html" class="external-link">rast</a></code>. Multi-layer
SpatRaster representing landscape similarities to stratification units.
Only required if <em>method = "mls"</em>.</p></dd>
<dt>verbose</dt>
<dd><p>Boolean. Show warning messages in the console? Default: FALSE</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A list with the following components:
<strong>su.repobs</strong>: Data table with the following attributes: (1) Original
IDs of the selected observation, (2) representative response value, (3)
stratification unit's numeric code, and (4) landscape similarity value at the
<em>XY</em> location of the selected observation (only if <em>method =
"mls"</em>).
<strong>su.norepobs</strong>: List of the numeric codes of stratification units
without observations.
<strong>su.repobs.sp</strong>: SpatVector of point geometry with the representative
response observation for each stratification unit represented in
<em>su.rast</em>.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>This selection scheme can be applied to classification units. For
classification units, one should replace the multi-layer SpatRaster of
landscape similarities with a multi-layer SpatRaster of spatial signatures. One
should also replace the raster layer of stratification units with that of
classification units.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="strata.html">strata</a></code>, <code><a href="similarity.html">similarity</a></code></p>
<p>Other Functions for Stratified Sampling: 
<code><a href="locations.html">locations</a>()</code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/terra/" class="external-link">terra</a></span><span class="op">)</span></span>
<span class="r-in"><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"exdat"</span>, package <span class="op">=</span> <span class="st">"rassta"</span><span class="op">)</span></span>
<span class="r-in"><span class="co"># Single-layer SpatRaster of stratification units</span></span>
<span class="r-in"><span class="va">fsu</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span>path <span class="op">=</span> <span class="va">p</span>, pattern <span class="op">=</span> <span class="st">"strata.tif"</span>, full.names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-in"><span class="va">su</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="va">fsu</span><span class="op">)</span></span>
<span class="r-in"><span class="co"># Observations with response values.</span></span>
<span class="r-in"><span class="co">## For this example, soil organic carbon (SOC) collected at 15 cm soil depth</span></span>
<span class="r-in"><span class="va">fob</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span>path <span class="op">=</span> <span class="va">p</span>, pattern <span class="op">=</span> <span class="st">"soc.shp"</span>, full.names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-in"><span class="va">ob</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/vect.html" class="external-link">vect</a></span><span class="op">(</span><span class="va">fob</span><span class="op">)</span></span>
<span class="r-in"><span class="co"># Column indices for ID and measured response value</span></span>
<span class="r-in"><span class="va">id</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span class="r-in"><span class="va">re</span> <span class="op">&lt;-</span> <span class="fl">2</span></span>
<span class="r-in"><span class="co"># Multi-layer SpatRaster of landscape similarities</span></span>
<span class="r-in"><span class="va">fls</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span>path <span class="op">=</span> <span class="va">p</span>, pattern <span class="op">=</span> <span class="st">"su_"</span>, full.names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-in"><span class="va">ls</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="va">fls</span><span class="op">)</span></span>
<span class="r-in"><span class="co"># Selection of representative response observations for stratification units</span></span>
<span class="r-in"><span class="va">ro</span> <span class="op">&lt;-</span> <span class="fu">observation</span><span class="op">(</span>su.rast <span class="op">=</span> <span class="va">su</span>, obs <span class="op">=</span> <span class="va">ob</span>, col.id <span class="op">=</span> <span class="va">id</span>, col.resp <span class="op">=</span> <span class="va">re</span>,</span>
<span class="r-in">                  ls.rast <span class="op">=</span> <span class="va">ls</span></span>
<span class="r-in">                 <span class="op">)</span></span>
<span class="r-in"><span class="co"># Plot representative observations</span></span>
<span class="r-in"><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">{</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">su</span>, type <span class="op">=</span> <span class="st">"classes"</span>,</span>
<span class="r-in">                       fun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/lines.html" class="external-link">points</a></span><span class="op">(</span><span class="va">ro</span><span class="op">$</span><span class="va">su_repobs.sp</span><span class="op">)</span></span>
<span class="r-in">                      <span class="op">)</span><span class="op">}</span></span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Bryan A. Fuentes, Minerva J. Dorantes, John R. Tipton.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.0.</p>
</div>

      </footer></div>

  


  

  </body></html>

