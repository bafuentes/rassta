<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Rasterization of Self-Organizing Map and Partitioning Around Medoids — som_pam • rassta</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Rasterization of Self-Organizing Map and Partitioning Around Medoids — som_pam"><meta property="og:description" content="Creation of a rasterized representation of the outputs from the
self-organizing map (SOM) and partitioning around medoids (PAM). Given a
reference raster layer, each SOM's winning unit and PAM's clustering value
will be mapped on the corresponding cell in the reference layer and across
the geographic space supported by such layer. This function is a follow-up of
the som_gap function. It is important to note that in order for
som_pam to work properly, the reference layer ref.rast
must have the same cell size, number of rows, number of columns, and index of
valid cells as those in the multi-layer SpatRaster object used in
som_gap."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rassta</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/classunits.html">Classification Units</a>
    </li>
    <li>
      <a href="../articles/modeling.html">Predictive Modeling Engine</a>
    </li>
    <li>
      <a href="../articles/sampling.html">Stratified Non-Probability Sampling</a>
    </li>
    <li>
      <a href="../articles/signature.html">Spatial Signature of Classification Units</a>
    </li>
    <li>
      <a href="../articles/similarity.html">Landscape Similarity to Stratification Units</a>
    </li>
    <li>
      <a href="../articles/stratunits.html">Stratification Units</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/bafuentes/rassta/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Rasterization of Self-Organizing Map and Partitioning Around Medoids</h1>
    <small class="dont-index">Source: <a href="https://github.com/bafuentes/rassta/blob/HEAD/R/som_pam.r" class="external-link"><code>R/som_pam.r</code></a></small>
    <div class="hidden name"><code>som_pam.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Creation of a rasterized representation of the outputs from the
self-organizing map (SOM) and partitioning around medoids (PAM). Given a
reference raster layer, each SOM's winning unit and PAM's clustering value
will be mapped on the corresponding cell in the reference layer and across
the geographic space supported by such layer. This function is a follow-up of
the <code><a href="som_gap.html">som_gap</a></code> function. It is important to note that in order for
<code>som_pam</code> to work properly, the reference layer <em>ref.rast</em>
must have the same cell size, number of rows, number of columns, and index of
valid cells as those in the multi-layer SpatRaster object used in
<code><a href="som_gap.html">som_gap</a></code>.</p>
    </div>

    <div id="ref-usage">Usage,<div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">som_pam</span><span class="op">(</span><span class="va">ref.rast</span>, <span class="va">kohsom</span>, <span class="va">k</span>, metric <span class="op">=</span> <span class="st">"manhattan"</span>, stand <span class="op">=</span> <span class="cn">FALSE</span>, <span class="va">...</span><span class="op">)</span></code></pre></div></div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>ref.rast</dt>
<dd><p>SpatRaster, as in <code><a href="https://rdrr.io/pkg/terra/man/rast.html" class="external-link">rast</a></code>. This raster
layer will serve as a reference for both cell position and geographic
support for the rasterized representation of SOM's winning units and PAM's
clustering.</p></dd>
<dt>kohsom</dt>
<dd><p>SOM Object of class <strong>kohonen</strong>, see
<code><a href="https://rdrr.io/pkg/kohonen/man/supersom.html" class="external-link">supersom</a></code>. The following components must be present
in the SOM object (1) <em>unit.classif</em> = winning units for all
observations, and (2) <em>codes</em> = matrix of codebook vectors.</p></dd>
<dt>k</dt>
<dd><p>Integer (positive value). Number of clusters to form from the SOM's
codebook vectors, where <em>k &lt; SOM's codebook vectors</em>.</p></dd>
<dt>metric</dt>
<dd><p>Character. Distance function for PAM. Options are "euclidean",
and "manhattan". Default: "manhattan"</p></dd>
<dt>stand</dt>
<dd><p>Boolean. For the PAM function, do SOM's codebook vectors need to
be standardized? Default: FALSE</p></dd>
<dt>...</dt>
<dd><p>Additional arguments as for <code><a href="https://rdrr.io/pkg/cluster/man/pam.html" class="external-link">pam</a></code>. See
<strong>Details</strong>.</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p><strong>sompam</strong>: Object of class <strong>pam</strong>. See ?pam.object for details.
<strong>sompam.rast</strong>: Multi-layer SpatRaster, as in
<code><a href="https://rdrr.io/pkg/terra/man/rast.html" class="external-link">rast</a></code>. The first raster layer corresponds to the SOM's
winning units. The second raster layer corresponds to the clustered SOM's
codebook vectors by PAM.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>As in <code><a href="som_gap.html">som_gap</a></code>, this function calls <code><a href="https://rdrr.io/pkg/cluster/man/pam.html" class="external-link">pam</a></code>
to perform the clustering of SOM's codebook vectors. The SOM object must
belong to the class <strong>kohonen</strong>, as in <code><a href="https://rdrr.io/pkg/kohonen/man/supersom.html" class="external-link">supersom</a></code>.</p>
<p>For this function to work as intended, the additional argument
<em>cluster.only</em> in <code><a href="https://rdrr.io/pkg/cluster/man/pam.html" class="external-link">pam</a></code> must remain as FALSE, which
is the default.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>Other Functions for Landscape Stratification: 
<code><a href="som_gap.html">som_gap</a>()</code>,
<code><a href="strata.html">strata</a>()</code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/terra/" class="external-link">terra</a></span><span class="op">)</span></span>
<span class="r-in"><span class="co"># Multi-layer SpatRaster with topographic variables</span></span>
<span class="r-in"><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"exdat"</span>, package <span class="op">=</span> <span class="st">"rassta"</span><span class="op">)</span></span>
<span class="r-in"><span class="va">ft</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span>path <span class="op">=</span> <span class="va">p</span>, pattern <span class="op">=</span> <span class="st">"^height|^slope|^wetness"</span>,</span>
<span class="r-in">                 full.names <span class="op">=</span> <span class="cn">TRUE</span></span>
<span class="r-in">                <span class="op">)</span></span>
<span class="r-in"><span class="va">t</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="va">ft</span><span class="op">)</span></span>
<span class="r-in"><span class="co"># Scale topographic variables (mean = 0, StDev = 1)</span></span>
<span class="r-in"><span class="va">ts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/scale.html" class="external-link">scale</a></span><span class="op">(</span><span class="va">t</span><span class="op">)</span></span>
<span class="r-in"><span class="co"># Self-organizing map and gap statistic for optimum k</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">963</span><span class="op">)</span></span>
<span class="r-in"><span class="va">tsom</span> <span class="op">&lt;-</span> <span class="fu"><a href="som_gap.html">som_gap</a></span><span class="op">(</span>var.rast <span class="op">=</span> <span class="va">ts</span>, xdim <span class="op">=</span> <span class="fl">8</span>, ydim <span class="op">=</span> <span class="fl">8</span>, rlen <span class="op">=</span> <span class="fl">150</span>,</span>
<span class="r-in">               mode <span class="op">=</span> <span class="st">"online"</span>, K.max <span class="op">=</span> <span class="fl">6</span>, B <span class="op">=</span> <span class="fl">300</span>, spaceH0 <span class="op">=</span> <span class="st">"original"</span>,</span>
<span class="r-in">               method <span class="op">=</span> <span class="st">"globalSEmax"</span></span>
<span class="r-in">              <span class="op">)</span></span>
<span class="r-in"><span class="co"># Optimum k</span></span>
<span class="r-in"><span class="va">tsom</span><span class="op">$</span><span class="va">Kopt</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 5</span>
<span class="r-in"><span class="co"># PAM clustering of topographic SOM's codebook vectors</span></span>
<span class="r-in"><span class="va">tpam</span> <span class="op">&lt;-</span> <span class="fu">som_pam</span><span class="op">(</span>ref.rast <span class="op">=</span> <span class="va">t</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, kohsom <span class="op">=</span> <span class="va">tsom</span><span class="op">$</span><span class="va">SOM</span>, k <span class="op">=</span> <span class="va">tsom</span><span class="op">$</span><span class="va">Kopt</span><span class="op">)</span></span>
<span class="r-in"><span class="co"># Plot topographic variables, SOM grid and PAM clustering</span></span>
<span class="r-in"><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">{</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">t</span>, <span class="va">tpam</span><span class="op">$</span><span class="va">sompam.rast</span><span class="op">)</span><span class="op">)</span><span class="op">}</span></span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Bryan A. Fuentes, Minerva J. Dorantes, John R. Tipton.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.0.</p>
</div>

      </footer></div>

  


  

  </body></html>

